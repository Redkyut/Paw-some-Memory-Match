<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paw-some Memory Match</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body {
            font-family: 'Fredoka', sans-serif;
            background-color: #fff1f2; /* Rose-50 */
            background-image: radial-gradient(#fda4af 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* 3D Flip Mechanics */
        .perspective-1000 {
            perspective: 1000px;
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            user-select: none;
        }

        .card-front {
            background-color: #ffffff;
            transform: rotateY(180deg);
            border: 4px solid #fecdd3; /* Rose-200 */
        }

        .card-back {
            background-color: #fda4af; /* Rose-300 */
            background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1h2v2H1V1zm4 0h2v2H5V1zm4 0h2v2H9V1zm4 0h2v2h-2V1zm4 0h2v2h-2V1zM1 5h2v2H1V5zm4 0h2v2H5V5zm4 0h2v2H9V5zm4 0h2v2h-2V5zm4 0h2v2h-2V5zM1 9h2v2H1V9zm4 0h2v2H5V9zm4 0h2v2H9V9zm4 0h2v2h-2V9zm4 0h2v2h-2V9zM1 13h2v2H1v-2zm4 0h2v2H5v-2zm4 0h2v2H9v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2zM1 17h2v2H1v-2zm4 0h2v2H5v-2zm4 0h2v2H9v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2z' fill='%23fff' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E");
        }

        .card:hover .card-inner {
            box-shadow: 0 10px 15px -3px rgba(253, 164, 175, 0.5);
        }

        /* Pop animation for matching */
        .matched {
            animation: pop 0.4s ease-in-out;
        }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <div class="text-center mb-6">
        <h1 class="text-4xl md:text-5xl font-bold text-rose-500 mb-2 tracking-wide drop-shadow-sm">Paw Match!</h1>
        <p class="text-rose-400 font-semibold text-sm md:text-base">Find the matching cuties</p>
    </div>

    <div class="flex gap-6 mb-6 bg-white px-6 py-3 rounded-2xl shadow-sm border-2 border-rose-100">
        <div class="text-center">
            <span class="block text-xs text-gray-400 uppercase font-bold tracking-wider">Moves</span>
            <span id="move-count" class="text-xl font-bold text-rose-500">0</span>
        </div>
        <div class="w-px bg-rose-100"></div>
        <div class="text-center">
            <span class="block text-xs text-gray-400 uppercase font-bold tracking-wider">Time</span>
            <span id="timer" class="text-xl font-bold text-rose-500">00:00</span>
        </div>
    </div>

    <div id="game-grid" class="grid grid-cols-4 gap-3 md:gap-4 w-full max-w-md perspective-1000 mb-8">
        </div>

    <button onclick="resetGame()" class="group relative px-8 py-3 bg-rose-400 hover:bg-rose-500 text-white rounded-full font-bold shadow-lg shadow-rose-200 transition-all active:scale-95">
        <span class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 group-hover:rotate-180 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
            </svg>
            Restart Game
        </span>
    </button>

    <script>
        // Game Configuration
        const emojis = ['ðŸ¶', 'ðŸ±', 'ðŸ­', 'ðŸ¹', 'ðŸ°', 'ðŸ¦Š', 'ðŸ»', 'ðŸ¼'];
        let cardsArray = [...emojis, ...emojis]; // Duplicate for pairs
        let moves = 0;
        let matchedPairs = 0;
        let hasFlippedCard = false;
        let lockBoard = false;
        let firstCard, secondCard;
        let timerInterval;
        let seconds = 0;
        let gameActive = false;

        const gridElement = document.getElementById('game-grid');
        const moveElement = document.getElementById('move-count');
        const timerElement = document.getElementById('timer');

        // Logic Helper: Shuffle array
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Logic Helper: Timer
        function startTimer() {
            if(gameActive) return;
            gameActive = true;
            seconds = 0;
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                seconds++;
                const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
                const secs = (seconds % 60).toString().padStart(2, '0');
                timerElement.innerText = `${mins}:${secs}`;
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
            gameActive = false;
        }

        // Core Game: Initialize
        function initGame() {
            gridElement.innerHTML = '';
            cardsArray = shuffle(cardsArray);
            
            cardsArray.forEach(emoji => {
                // Create HTML structure for card
                const card = document.createElement('div');
                card.classList.add('card', 'h-20', 'md:h-24', 'cursor-pointer');
                card.dataset.emoji = emoji;

                const cardInner = document.createElement('div');
                cardInner.classList.add('card-inner');

                const cardFront = document.createElement('div');
                cardFront.classList.add('card-front');
                cardFront.innerText = emoji;

                const cardBack = document.createElement('div');
                cardBack.classList.add('card-back');
                // Optional: Add a cute icon to the back
                cardBack.innerHTML = '<span class="text-white text-2xl opacity-80">?</span>';

                cardInner.appendChild(cardFront);
                cardInner.appendChild(cardBack);
                card.appendChild(cardInner);
                
                card.addEventListener('click', flipCard);
                gridElement.appendChild(card);
            });
        }

        // Core Game: Flip Logic
        function flipCard() {
            if (!gameActive && moves === 0) startTimer(); // Start timer on first click
            if (lockBoard) return;
            if (this === firstCard) return;

            this.classList.add('flipped');

            if (!hasFlippedCard) {
                // First card clicked
                hasFlippedCard = true;
                firstCard = this;
                return;
            }

            // Second card clicked
            secondCard = this;
            incrementMoves();
            checkForMatch();
        }

        // Core Game: Match Logic
        function checkForMatch() {
            let isMatch = firstCard.dataset.emoji === secondCard.dataset.emoji;
            isMatch ? disableCards() : unflipCards();
        }

        function disableCards() {
            firstCard.removeEventListener('click', flipCard);
            secondCard.removeEventListener('click', flipCard);
            
            // Add pop animation
            setTimeout(() => {
                firstCard.querySelector('.card-front').classList.add('matched');
                secondCard.querySelector('.card-front').classList.add('matched');
            }, 300);

            resetBoard();
            matchedPairs++;

            if (matchedPairs === emojis.length) {
                handleWin();
            }
        }

        function unflipCards() {
            lockBoard = true;
            setTimeout(() => {
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');
                resetBoard();
            }, 1000);
        }

        function resetBoard() {
            [hasFlippedCard, lockBoard] = [false, false];
            [firstCard, secondCard] = [null, null];
        }

        function incrementMoves() {
            moves++;
            moveElement.innerText = moves;
        }

        function handleWin() {
            stopTimer();
            // Trigger Confetti
            var duration = 3000;
            var end = Date.now() + duration;

            (function frame() {
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#fda4af', '#f472b6', '#fb7185'] // Pink/Rose colors
                });
                confetti({
                    particleCount: 5,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#fda4af', '#f472b6', '#fb7185']
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
        }

        function resetGame() {
            stopTimer();
            moves = 0;
            matchedPairs = 0;
            seconds = 0;
            moveElement.innerText = '0';
            timerElement.innerText = '00:00';
            resetBoard();
            initGame();
        }

        // Start the game on load
        initGame();

    </script>
</body>
</html>